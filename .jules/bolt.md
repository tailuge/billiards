## 2025-05-22 - [Optimizing Mathaven Iterative Solver]
**Learning:** The Mathaven iterative solver for cushion collisions was a major performance bottleneck, taking ~2.5ms per 10,000 iterations initially. By replacing `Math.pow(x, 2)` with `x * x`, inlining sub-methods, and avoiding redundant trig calls by using velocity ratios for sine and cosine, a substantial speedup was achieved. Furthermore, moving `atan2` calculations to a subclass (`HistoryMathaven`) used only for diagrams resulted in a total **8x speedup** for the main game's physics loop. Reusing the class instance also reduced GC pressure.
**Action:** Always check for `Math.pow` and redundant trig calls in tight loops. Use subclassing or flags to disable expensive computations (like `atan2` for angles) when they are only needed for debugging or visualization. Reuse heavy objects in the physics loop to avoid allocations.
